"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook=globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook||[]).push([[772],{8453(e,n,s){s.d(n,{R:()=>t,x:()=>l});var i=s(6540);const r={},o=i.createContext(r);function t(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:n},e.children)}},9850(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"module-02-ros2/architecture-setup","title":"Chapter 1: ROS 2 Architecture & Setup","description":"Introduction","source":"@site/docs/module-02-ros2/architecture-setup.md","sourceDirName":"module-02-ros2","slug":"/module-02-ros2/architecture-setup","permalink":"/docs/module-02-ros2/architecture-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/muhammadNadeem92/physical-ai-humanoid-robotics-textbook/tree/main/docs/module-02-ros2/architecture-setup.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Introduction to Humanoid Robotics","permalink":"/docs/module-01-introduction/introduction-to-humanoid-robotics"},"next":{"title":"Chapter 2: Nodes, Topics, and Messages","permalink":"/docs/module-02-ros2/nodes-topics-messages"}}');var r=s(4848),o=s(8453);const t={},l="Chapter 1: ROS 2 Architecture & Setup",a={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Core Concepts",id:"core-concepts",level:2},{value:"ROS 2 Philosophy and Design Goals",id:"ros-2-philosophy-and-design-goals",level:3},{value:"Nodes and Graph-Based Execution",id:"nodes-and-graph-based-execution",level:3},{value:"DDS vs Traditional Client/Server",id:"dds-vs-traditional-clientserver",level:3},{value:"Workspaces and Packages",id:"workspaces-and-packages",level:3},{value:"ROS 2 CLI Tools",id:"ros-2-cli-tools",level:3},{value:"ROS Graph Visualization",id:"ros-graph-visualization",level:3},{value:"Examples",id:"examples",level:2},{value:"Installing ROS 2 Humble Hawksbill",id:"installing-ros-2-humble-hawksbill",level:3},{value:"Creating and Building a Python Workspace",id:"creating-and-building-a-python-workspace",level:3},{value:"Running a Sample Node",id:"running-a-sample-node",level:3},{value:"Troubleshooting Tips",id:"troubleshooting-tips",level:3},{value:"Summary &amp; Key Takeaways",id:"summary--key-takeaways",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"chapter-1-ros-2-architecture--setup",children:"Chapter 1: ROS 2 Architecture & Setup"})}),"\n",(0,r.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(n.p,{children:"Welcome to the world of ROS 2 (Robot Operating System 2), the middleware that serves as the nervous system for Physical AI systems. In Module 1, you learned about Physical AI and how intelligent agents interact with the real world through sensors and actuators. Now, we'll dive into ROS 2, which enables these interactions by connecting perception, AI reasoning, and actuation through a distributed architecture."}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 is not just a software framework; it's a complete ecosystem that allows multiple processes (called \"nodes\") to communicate with each other seamlessly. Whether you're controlling a humanoid robot's movements, processing sensor data, or making high-level decisions, ROS 2 provides the communication infrastructure that ties everything together."}),"\n",(0,r.jsx)(n.p,{children:"If you recall from Module 1, Physical AI systems require tight integration between perception (sensors), reasoning (AI), and action (actuators). ROS 2 serves as the middleware that enables this integration by allowing different software components to communicate seamlessly, regardless of which computer they're running on or which programming language they're written in."}),"\n",(0,r.jsx)(n.p,{children:"This chapter will guide you through setting up ROS 2 on your system and understanding its fundamental architecture. By the end of this chapter, you'll have a working ROS 2 environment and understand the core concepts that make distributed robotics possible."}),"\n",(0,r.jsx)(n.h2,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,r.jsx)(n.h3,{id:"ros-2-philosophy-and-design-goals",children:"ROS 2 Philosophy and Design Goals"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 was designed to address the limitations of its predecessor, ROS 1, particularly in the areas of real-time performance, security, and multi-robot systems. The key design goals include:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Real-time performance"}),": ROS 2 uses DDS (Data Distribution Service) as its communication layer, providing better real-time capabilities"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Security"}),": Built-in security features including authentication, encryption, and access control"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Multi-robot support"}),": Better support for coordinating multiple robots in the same system"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Production readiness"}),": Designed for commercial and industrial applications"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Platform independence"}),": Runs on various operating systems including Linux, Windows, and macOS"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"nodes-and-graph-based-execution",children:"Nodes and Graph-Based Execution"}),"\n",(0,r.jsxs)(n.p,{children:["In ROS 2, a ",(0,r.jsx)(n.strong,{children:"node"})," is a process that performs computation. Nodes are the fundamental building blocks of a ROS program, and they can be written in different programming languages (Python, C++, etc.). Each node can publish data to or subscribe to data from different ",(0,r.jsx)(n.strong,{children:"topics"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["The collection of nodes and their connections forms the ",(0,r.jsx)(n.strong,{children:"ROS graph"})," - a dynamic, distributed network of processes that communicate with each other. This graph-based execution model allows for:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Decoupling"}),": Nodes don't need to know about each other directly"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Flexibility"}),": Nodes can be added, removed, or replaced without affecting others"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Scalability"}),": Systems can grow from single robots to fleets of robots"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"dds-vs-traditional-clientserver",children:"DDS vs Traditional Client/Server"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 uses DDS (Data Distribution Service) as its underlying communication middleware, which differs significantly from traditional client/server architectures:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Traditional Client/Server:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Direct connections between specific clients and servers"}),"\n",(0,r.jsx)(n.li,{children:"Request/response model"}),"\n",(0,r.jsx)(n.li,{children:"Tight coupling between components"}),"\n",(0,r.jsx)(n.li,{children:"Difficult to scale and maintain"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"DDS (Data-Centric Approach):"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Anonymous communication through topics"}),"\n",(0,r.jsx)(n.li,{children:"Publish/subscribe model with data availability"}),"\n",(0,r.jsx)(n.li,{children:"Loose coupling - publishers don't know about subscribers"}),"\n",(0,r.jsx)(n.li,{children:"Better scalability and flexibility"}),"\n",(0,r.jsx)(n.li,{children:"Built-in Quality of Service (QoS) policies"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"workspaces-and-packages",children:"Workspaces and Packages"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"workspace"})," in ROS 2 is a directory where you develop and build ROS 2 packages. The typical structure includes:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"src/"})," - Source code for packages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"build/"})," - Build artifacts"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"install/"})," - Installation directory"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"log/"})," - Log files"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"package"})," is the basic building and distribution unit in ROS 2. Each package contains:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Source code (Python, C++, etc.)"}),"\n",(0,r.jsx)(n.li,{children:"Configuration files"}),"\n",(0,r.jsx)(n.li,{children:"Launch files"}),"\n",(0,r.jsx)(n.li,{children:"Documentation"}),"\n",(0,r.jsx)(n.li,{children:"Dependencies specification"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"ros-2-cli-tools",children:"ROS 2 CLI Tools"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 provides a comprehensive set of command-line tools for development and debugging:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ros2 run"})," - Run a node from a package"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ros2 topic"})," - List, echo, publish, and info about topics"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ros2 service"})," - List, call services"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ros2 action"})," - List, send goals to actions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ros2 node"})," - List nodes and info about them"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ros2 pkg"})," - Create, list, and find packages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ros2 launch"})," - Run launch files"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"ros-graph-visualization",children:"ROS Graph Visualization"}),"\n",(0,r.jsx)(n.p,{children:"The ROS 2 graph represents the dynamic network of nodes communicating with each other. Here's a visualization of how nodes interact through topics:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph LR\r\n    A[Sensor Node] --\x3e|sensor_data| B((Topic))\r\n    C[Processing Node] --\x3e|sensor_data| B\r\n    B --\x3e|processed_data| D((Another Topic))\r\n    D --\x3e|processed_data| E[Actuator Node]\r\n    F[Control Node] --\x3e|commands| D\r\n\r\n    style A fill:#4CAF50\r\n    style E fill:#2196F3\r\n    style C fill:#FF9800\r\n    style F fill:#9C27B0\n"})}),"\n",(0,r.jsx)(n.p,{children:"In this diagram:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Green: Sensor Node publishing sensor data"}),"\n",(0,r.jsx)(n.li,{children:"Orange: Processing Node subscribing to sensor data and publishing processed data"}),"\n",(0,r.jsx)(n.li,{children:"Blue: Actuator Node subscribing to processed data"}),"\n",(0,r.jsx)(n.li,{children:"Purple: Control Node publishing commands"}),"\n",(0,r.jsx)(n.li,{children:"Circles: Topics facilitating communication between nodes"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.h3,{id:"installing-ros-2-humble-hawksbill",children:"Installing ROS 2 Humble Hawksbill"}),"\n",(0,r.jsx)(n.p,{children:"This section provides complete installation steps for ROS 2 Humble Hawksbill on Ubuntu 22.04:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Set locale"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"locale  # check for UTF-8\r\nsudo apt update && sudo apt install locales\r\nsudo locale-gen en_US.UTF-8\r\nsudo update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8\r\nexport LANG=en_US.UTF-8\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Setup sources"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'sudo apt install software-properties-common\r\nsudo add-apt-repository universe\r\nsudo apt update && sudo apt install curl gnupg lsb-release\r\nsudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg\r\necho "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/ros2.list > /dev/null\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Install ROS 2 packages"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt update\r\nsudo apt install ros-humble-desktop\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Environment setup"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'echo "source /opt/ros/humble/setup.bash" >> ~/.bashrc\r\nsource ~/.bashrc\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Install additional tools"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt install python3-colcon-common-extensions\r\nsudo apt install python3-rosdep\r\nsudo rosdep init\r\nrosdep update\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"creating-and-building-a-python-workspace",children:"Creating and Building a Python Workspace"}),"\n",(0,r.jsx)(n.p,{children:"Let's create a workspace for our ROS 2 Python packages:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Create workspace directory"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src\r\ncd ~/ros2_ws\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Create a simple Python package"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\r\nros2 pkg create --build-type ament_python my_first_ros2_pkg\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Build the workspace"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\r\ncolcon build --packages-select my_first_ros2_pkg\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Source the workspace"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"source ~/ros2_ws/install/setup.bash\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"running-a-sample-node",children:"Running a Sample Node"}),"\n",(0,r.jsxs)(n.p,{children:["Let's run a sample node using the ",(0,r.jsx)(n.code,{children:"ros2 run"})," command:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Source ROS 2"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Source your workspace"})," (if you created one):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"source ~/ros2_ws/install/setup.bash\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Run a sample node"})," (for example, the turtlesim node):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run turtlesim turtlesim_node\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"troubleshooting-tips",children:"Troubleshooting Tips"}),"\n",(0,r.jsx)(n.p,{children:"Here are common issues you might encounter during installation and setup:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:'Issue: "command not found" when running ROS 2 commands'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),": Make sure you've sourced the ROS 2 setup file: ",(0,r.jsx)(n.code,{children:"source /opt/ros/humble/setup.bash"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Issue: Permission denied errors during installation"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),": Make sure you're using ",(0,r.jsx)(n.code,{children:"sudo"})," for system-wide installations: ",(0,r.jsx)(n.code,{children:"sudo apt install ..."})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Issue: Python package import errors"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),": Make sure you've installed the Python extensions: ",(0,r.jsx)(n.code,{children:"sudo apt install python3-colcon-common-extensions"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Issue: Workspace not building"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),": Make sure you're in the correct workspace directory and that you've properly created the ",(0,r.jsx)(n.code,{children:"src"})," directory: ",(0,r.jsx)(n.code,{children:"mkdir -p ~/ros2_ws/src"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"summary--key-takeaways",children:"Summary & Key Takeaways"}),"\n",(0,r.jsx)(n.p,{children:"In this chapter, you've learned the foundational concepts of ROS 2:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ROS 2"})," serves as the nervous system for Physical AI systems, connecting perception, reasoning, and actuation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Nodes"})," are processes that perform computation and communicate through the ROS graph"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"DDS"})," provides a data-centric communication approach that's more flexible than traditional client/server"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Workspaces and packages"})," organize your ROS 2 development"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI tools"})," help you develop, debug, and manage your ROS 2 systems"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"You've also successfully installed ROS 2 Humble Hawksbill and created your first workspace. These foundational skills will be essential as we dive deeper into creating nodes, topics, and other ROS 2 communication patterns in the next chapters."}),"\n",(0,r.jsx)(n.p,{children:"In the next chapter, we'll explore how nodes communicate with each other through topics, messages, services, and actions - the core communication primitives that make distributed robotics possible."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);